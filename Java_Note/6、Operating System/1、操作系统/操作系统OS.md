# 操作系统OS

# 一、基本介绍

## 1、基本概念

操作系统（Operating System，简称 OS）是管理计算机硬件与软件资源的程序，是计算机系统的内核与基石；

操作系统本质上是运行在计算机上的软件程序 ；

操作系统为用户提供一个与系统交互的操作界面 ；

操作系统分**内核与外壳**（我们可以把外壳理解成围绕着内核的应用程序，而内核就是能操作硬件的程序）。

内核负责管理系统的进程、内存、设备驱动程序、文件和网络系统等等，决定着系统的性能和稳定性。是连接应用程序和硬件的桥梁。 内核就是操作系统背后黑盒的核心。



## 2、系统分类

### 2.1 分时系统：Sharing time system

#### 1）基本介绍

在一个系统中多个用户分时地使用同一台计算机

系统把`CPU`时间分成很短的时间片，轮流地分配给多个作业。

优点就是：对多个用户的多个作业都能保证足够快的响应时间，并且有效提高了资源的利用率。 



#### 2）特征

   **交互性：**用户与系统进行人机对话。 

​    **多路性（并行性）：**多用户同时在各自终端上使用同一CPU。 

​    **独立性：**用户可彼此独立操作，互不干扰，互不混淆。 

​    **及时性：**用户在短时间内可得到系统的及时回答。 



#### 3）存在的问题：

虽然分时操作系统比较好地解决了人机交互问题，但是在一些应用场合，需要系统能对外部的信息在规定的时间（比时间片的时间还短）内作出处理（比如飞机订票系统或导弹制导系统)。因此，实时系统应运而生。

多道批处理是实现作业自动控制而**无需人工干预**的系统，而分时系统是实现**人机交互**的系统



### 2.2 实时系统：Real-time system

#### 1）基本介绍

计算机及时响应外部事件地请求并在规定时限那完成对该事件地处理，控制所有实时设和实时任务协调一致地运行。

大多数调度算法是**可抢占式**的

优点是：能够集中地及时地处理并作出反应，高可靠性，安全性。 

#### 2）特征

- 及时性

- 可靠性




通常计算机采用的是分时，就是多个进程／用户之间共享`CPU`，从形势上实现多任务。各个用户／进程之间的调度并非精准度特别高，如果一个进程被锁住，可以给它分配更多的时间。而实时操作系统则不同，软件和硬件必须遵从严格的时间限制，超过时限的进程可能直接被终止。在这样的操作系统中，每次加锁都需要仔细考虑。 



### 2.3 单道批处理系统

#### 1）基本介绍

系统对作业的处理是成批进行的，但内存中始终只运行一道作业

#### 2）主要特征

**自动性**（磁带上的一批作业能自动运行，无需人工干预）

**顺序性**（磁带上的各道作业按顺序地进入内存，先调入内存的作业先完成）

**单道性**（内存中仅有一道程序运行）

#### 3）存在的问题：

作业运行过程中如果发生I/O请求，高速的CPU便需要等待低速的I/O操作完成，导致CPU资源利用率和系统吞吐量降低





### 2.4 多道批处理系统

#### 1）基本介绍

多道程序设计技术允许多个程序同时进入内存并运行。当一道程序因I/O请求而暂停运行时，CPU便立即转去运行另一道程序。它让系统的各个组成部分都尽量去“忙”，花费很少时间去切换任务，达到了系统各部件之间的并行工作，从而使各种资源得到充分利用，增大系统吞吐量大。

#### 2）主要特征：

(1)**多道**（计算机内存中同时存放多道相互独立的程序）

(2)**宏观上并行**（同时进入系统的多道程序都处于运行过程中，即它们先后开始了各自的运行，但都未运行完毕）

(3)**微观上串行**（内存中的多道程序轮流占有CPU，交替执行）

#### 3）存在的问题：

作业周转时间较长，并且不提供人机交互能力，用户既不能了解自己程序的运行情况，也不能控制计算机。）

#### 4）相比单道的优点

- CPU利用率高 
- 系统吞吐量大
- I/O设备利用率高

但是系统要付出额外的开销来组织作业和切换作业，系统开销比单道大



## 3、管理功能

 （1）作业管理：包括任务、界面管理、人机交互、图形界面、语音控制和虚拟现实等；

 （2）文件管理：又称为信息管理；

 （3）存储管理：实质是对存储“空间”的管理，主要指对主存的管理；

 （4）设备管理：实质是对硬件设备的管理，其中包括对输入输出设备的分配、启动、完成和回收；

 （5）进程管理：实质上是对处理机执行“时间”的管理，即如何将CPU真正合理地分配给每个任务。









# 二、系统调用

## 1、用户态(user mode) 

​		用户态运行的进程或可以直接读取用户程序的数据。

## 2、系统态(内核态)(kernel mode)

可以简单的理解系统态运行的进程或程序几乎可以访问计算机的任何资源，不受限制。



## 3、系统调用

我们运行的程序基本都是运行在用户态，如果我们**调用操作系统提供的系统态级别的子功能**咋办呢？那就需要系统调用了！

也就是说在我们运行的用户程序中，凡是与系统态级别的资源有关的操作（如文件管理、进程控制、内存管理等)，都必须通过系统调用方式向操作系统提出服务请求，并由操作系统代为完成。

## 4、类别

这些系统调用按功能大致可分为如下几类：

- 设备管理。完成设备的请求或释放，以及设备启动等功能。
- 文件管理。完成文件的读、写、创建及删除等功能。
- 进程控制。完成进程的创建、撤销、阻塞及唤醒等功能。
- 进程通信。完成进程之间的消息传递或信号传递等功能。
- 内存管理。完成内存的分配、回收以及获取作业占用内存区大小及地址等功能。



# 三、虚拟内存

虚拟内存就是说，让物理内存扩充成更大的逻辑内存，从而让程序获得更多的可用内存。虚拟内存使用部分加载的技术，让一个进程或者资源的某些页面加载进内存，从而能够加载更多的进程，甚至能加载比内存大的进程，这样看起来好像内存变大了，这部分内存其实包含了磁盘或者硬盘，并且就叫做虚拟内存。





