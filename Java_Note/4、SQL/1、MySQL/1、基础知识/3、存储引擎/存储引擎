#  存储引擎（Storage ENGINES）

# 一、基本介绍

## 1、基本概念

数据库存储引擎是数据库底层软件组织，数据库管理系统（DBMS）使用数据引擎进行创建、查询、更新和删除数据。不同的存储引擎提供不同的存储机制、索引技巧、锁定水平等功能，使用不同的存储引擎，还可以获得特定的功能。现在许多不同的数据库管理系统都支持多种不同的数据引擎。

MySQL 可以将数据以不同的技术存储在文件（内存）中，这种技术就成为存储引擎。存储引擎就是一种存储和查询数据的技术。

每一种存储引擎使用不同的存储机制，索引技巧，锁定水平，最终提供广泛且不同的功能。

## 2、种类

- MyISAM

- InnoDB
- Memory
- CSV
- Archive

## 3、InnoDB和MyISAM有什么区别?

- InnoDB支持事务，而MyISAM不支持事务
- InnoDB支持行级锁，而MyISAM支持表级锁
- InnoDB支持MVCC, 而MyISAM不支持
- InnoDB支持外键，而MyISAM不支持
- InnoDB不支持全文索引，而MyISAM支持

InnoDB的B+树主键索引的叶子节点就是数据文件，辅助索引的叶子节点是主键的值；而MyISAM的B+树主键索引和辅助索引的叶子节点都是数据文件的地址指针。

## 4、适用场景

MyISAM适合：(1)做很多count 的计算；(2)插入不频繁，查询非常频繁；(3)没有事务。

InnoDB适合：(1)可靠性要求比较高，或者要求事务；(2)表更新和查询都相当的频繁，并且表锁定的机会比较大的情况。



# 二、基本语法

1、显示引擎

```
SHOW ENGINES
```







# 三、InnoDB引擎

InnoDB是一个事务型的存储引擎，支持回滚，设计目标是处理大数量数据时提供高性能的服务，它在运行时会在内存中建立缓冲池，用于缓冲数据和索引。



优点：

- 支持事务处理、ACID事务特性；
- 实现了SQL标准的四种隔离级别；
- 支持行级锁和外键约束；
- 可以利用事务日志进行数据恢复。
- 锁级别为行锁，行锁优点是适用于高并发的频繁表修改，高并发是性能优于 MyISAM。缺点是系统消耗较大。
- 索引不仅缓存自身，也缓存数据，相比 MyISAM 需要更大的内存。



缺点：

因为它没有保存表的行数，当使用COUNT统计时会扫描全表。



# 四、MyISAM引擎

优点：

- 高性能读取；
- 因为它保存了表的行数，当使用COUNT统计时只需要直接读取已经保存好的值而不需要进行全表扫描。

缺点：

- 锁级别为表锁，表锁优点是开销小，加锁快；缺点是锁粒度大，发生锁冲动概率较高，容纳并发能力低，这个引擎适合查询为主的业务。

- 此引擎不支持事务，也不支持外键。

- INSERT和UPDATE操作需要锁定整个表；

  



## 为什么MyISAM更适合做频繁的select

INNODB 在做 SELECT 的时候，要维护的东西比 MYISAM 引擎多很多。

MYISAM只需缓存索引块，INNODB 还要缓存数据块（INNODB的数据文件和索引文件是在一起的）

Innodb寻址要映射到块，再到行，MyISAM记录的直接是文件的OFFSET，定位比Innodb快

Inoodb要维护MVCC一致





## 参考文章

[MySQL 中 MyISAM 中的查询为什么比 InnoDB 快？](https://cloud.tencent.com/developer/article/1401129)



