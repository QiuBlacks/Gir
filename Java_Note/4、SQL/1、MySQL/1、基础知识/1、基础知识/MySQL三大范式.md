# MySQL三大范式

在设计数据库结构的时候,要尽量遵守三范式,如果不遵守,必须有足够的理由.比如性能. 事实上我们经常会为了性能而妥协数据库的设计



## 一、为什么设计三大范式

#### 信息重复（冗余）

####  更新异常

#### 插入异常(无法表示某些信息)

#### 删除异常（丢失有用的信息）





## 第一范式（1NF）

### 1、定义

数据表的每一列都要保持它的原子性，也就是列(或者每个属性)都是不可再分的最小数据单元(也称为最小的原子单元)

只要数据库是关系型数据库，就必须满足1NF

### 2、图解

![image-20200518115305931](https://gitee.com/BlacksJack/picture-bed/raw/master/img/20200910182146.png)









## 第二范式（2NF)

### 1、定义

必须先满足第一范式（1NF）

非主属性（每一属性）必须完全依赖于主键（==消除部分依赖==）



### 2、例子

![image-20200518202641969](https://gitee.com/BlacksJack/picture-bed/raw/master/img/20200910182147.png)

如上图加粗字体所示，可能对于同一个订单，含有不同的产品，因此主键必须是产品号和订单号联合组成。但可以发现产品数量、产品价格与订单号、产品号都有关，不过订单时间与订单金额仅与订单号有关，这就违反了第二范式。

故可以修改为：

![image-20200518202702370](https://gitee.com/BlacksJack/picture-bed/raw/master/img/20200910182148.png)

### 3、不满足2NF存在以下问题：

(1) 数据冗余：
		(2) 更新异常：
		(3) 插入异常：	
		(4) 删除异常：
	





## 第三范式（3NF）

### 1、定义

**在满足第二范式的基础上，任何非主属性不依赖于其他非主属性，即在第二范式的基础上==消除传递依赖==。**

第三范式要求数据表的每一列都与主键**直接相关**，而不是间接相关。

### 2、例子

Student表（学号，姓名，年龄，性别，所在院校，院校地址，院校电话）

这样一个表结构，就存在上述关系。 学号--> 所在院校 --> (院校地址，院校电话)

这样的表结构，我们应该拆开来，如下。

（学号，姓名，年龄，性别，所在院校）--（所在院校，院校地址，院校电话）



## 范式目的

- 减小数据的冗余性
- 提高效率







# 数据库依赖

## 一、部分函数依赖

设X,Y是关系R的两个属性集合，存在X→Y，若X’是X的真子集，存在X’→Y，则称Y部分函数依赖于X。
		

```java
通过AB能得出C，通过A也能得出C，通过B也能得出C，
那么说C部分依赖于AB。
```

例：（学号，身份证号） → 姓名        

因为  学号→姓名   身份证 →姓名（前提是学号唯一）



## 二、完全函数依赖

设X,Y是关系R的两个属性集合，X’是X的真子集，存在X→Y，但对每一个X’都有X’ !→Y，则称Y完全函数依赖于X。

```
通过AB能得出C，但是AB单独得不出C，
那么说C完全依赖于AB.
```

例：（学号，课程） → 分数 （注：因为同一个的学号对应的分数不确定，同一个课名对应的分数也不确定）

因为  学号！→分数		课程！→分数    



## 三、传递函数依赖

设X,Y,Z是关系R中互不相同的属性集合，存在X→Y(Y !→X),Y→Z，则称Z传递函数依赖于X。

```
比如说：B可以通过A得到，C可以通过B得到，那么就称C传递依赖A。
```



















