# **==和equal**

- 对于基本类型，== 判断两个值是否相等，基本类型没有 equals() 方法。
- 对于引用类型，== 判断两个变量是否引用同一个对象，而 equals() 判断引用的对象是否等价。

## **一、题目：**

**String s1 = "abc" 与 String s2 = new String("abc")的区别**

## **二、思路解析**

**首先，我们先看看以上两句分别做了什么？**

#### **1、String s1 = “abc” 做了什么**

**在栈中创建了一个名为 s1 的变量（引用）**

**如果 String池 中没有 “abc” 存在，则在常量池中创建一个 String 类型的 “abc” 对象，有就不创建**

**将 “abc” 的地址赋给 s1**

**所以，此句到底创建了几个对象，根据 “abc” 的情况而定，“abc” 之前存在就是一个，否则就没有创建。**



#### **2、String s2 = new String(“abc”) 做了什么**

**创建了一个名为 s2 的变量（引用）**

**如果 String池 中没有 “abc” 存在，则在 String池 中创建一个 String 类型的 “abc” ，有就不创建**

**使用 new关键字 在堆中创建了一个 String 对象**

**将用 new 创建的 String 对象的地址赋给 s2**



#### **3、s1 == s2 与 s1.equals(s2)**

**s1 与 s2 看着都是内容为 “abc” 的字符串，但是使用 == 和 equals() 来判断它们是否相等时会发现，结果并不一样。**

**s1 == s2**

**结果为false，根据上述内容我们可以知道，两者虽然内容一致，但是其实两者的指向的内存地址并不一致，而 == 会检查两者的内存地址是否一致，一致为true，不一致为false**

**s1.equals(s2)**

**结果为true，因为 equals() 在检查地址不相等后，还会检查两者的内容，两者内容相等，则仍然返回true，毫无疑问，两者的内容是一致的。**





#### **4、关于 String s3 = “abc” + “xyz”;到底创建了几个对象？**

**关于 “abc” 与 “xyz” 在上述中已经提到，如果之前存在就不用创建，不存在则创建。我们更需要关心的是这两个字符串的拼接。**

**使用 “+” 拼接字符创，实际是创建了一个新字符串 “abcxyz”，所以至少会创建一个对象，如果 “abc” 与 “xyz” 之前都不存在，则就是创建3个对象，如果两个中只有一个存在，则是2个。**