[TOC]



## AOP介绍（Aspect Oriented Programming）

**一般配置AOP的代码为公共代码，例如工具类**

## **一、基本介绍**

### 1、定义

**AOP（Aspect Oriented Programming）：面向切面编程。**

**切** ：指的是横切逻辑，原有业务逻辑代码不动，只能操作横切逻辑代码，所以面向横切逻辑

**面** ：横切逻辑代码往往要影响的是很多个方法，每个方法如同一个点，多个点构成一个面。这里有一个面的概念

### 2、解决问题

在不改变原有业务逻辑的情况下，增强横切逻辑代码，根本上解耦合，避免横切逻辑代码重复。

### 3、作用

==提供声明式事务；允许用户自定义切面==

日志记录，性能统计，安全控制，权限管理，事务处理，异常处理，资源池管理。

### 4、AOP  的实现方式

使用**动态代理**技术



## 二、**Spring对AOP的支持**

### 1、基本介绍

**Spring中AOP代理由Spring的IOC容器负责生成、管理，其依赖关系也由IOC容器负责管理**。因此，AOP代理可以直接使用容器中的其它bean实例作为目标，这种关系可由IOC容器的依赖注入提供。

### 2、Spring创建代理的规则

1）**默认使用Java动态代理来创建AOP代理**，这样就可以为任何接口实例创建代理了

2）**当需要代理的类不是代理接口的时候，Spring会切换为使用CGLIB代理**，也可强制使用CGLIB









## **三、AOP的专业术语**

#### **1.通知（Advice）**

就是你想要的功能，也就是上面说的 安全，事物，日志等。你给先定义好把，然后在想用的地方用一下。

（切入点使用的公共代码）

**类型**：**前置通知,  后置通知,  异常通知,  最终通知,  环绕通知**

#### **2.连接点（JoinPoint）**

　　即使用到的所有方法

####   **3.切入点（Pointcut）**

　　上面说的连接点的基础上，来定义切入点（添加方法）

####   **4.切面（Aspect）**

　		切入点和通知（引介）的结合

####   **5.引入（introduction）**

　　允许我们向现有的类添加新方法属性。这不就是把切面（也就是新方法属性：通知定义的）用到目标类中吗

####   **6.目标（target）**

　　引入中所提到的目标类，也就是要被通知的对象，也就是真正的业务逻辑，他可以在毫不知情的情况下，被咱们织入切面。而自己专注于业务本身的逻辑。

####   **7.代理(proxy)**

　　怎么实现整套aop机制的，都是通过代理

####   **8.织入(weaving)**

　　把切面应用到目标对象来创建新的代理对象的过程。有3种方式，spring采用的是运行时，为什么是运行时，后面解释。

　　关键就是：切点定义了哪些连接点会得到通知



![image-20200530112255834](E:\black user\Java\有道云截图\image-20200530112255834.png)