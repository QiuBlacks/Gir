# 热部署

# 一、基础知识

## 1、热部署是什么？

对于Java应用程序来说，热部署就是在运行时更新Java类文件。

## 2、热部署有什么用？

可以不重启应用的情况下，更新应用。举个例子，就像电脑可以在不重启的情况下，更换U盘。

OSGI也正是因为它的模块化和热部署，才显得热门。

## 3、热部署的原理是什么？

首先通过java编译器，将java文件编译成class字节码，类加载器读取class字节码，再将类转化为实例，对实例newInstance就可以生成对象。

类加载器ClassLoader功能，也就是将class字节码转换到类的实例。

在java应用中，所有的实例都是由类加载器，加载而来。

一般在系统中，类的加载都是由系统自带的类加载器完成，而且对于同一个全限定名的java类（com.HelloWorld），只能被加载一次，而且无法被卸载。

这个时候问题就来了，如果我们希望将java类卸载，并且替换更新版本的java类，该怎么做呢？

   既然在类加载器中，java类只能被加载一次，并且无法卸载。那是不是可以**直接把类加载器给换了**？答案是可以的，我们可以**自定义类加载器，并重写ClassLoader的findClass方法**。想要实现热部署可以分以下三个步骤：

1、销毁该自定义ClassLoader

2、更新class类文件

3、创建新的ClassLoader去加载更新后的class类文件。







