# 多线程知识详解
--------------------------------------------------------------------------------

# 一、基本定义

1、程序：是为完成特定任务，用某种语言编写的一组指令的集合，即指一段静态的代码，静态对象。

2、进程：是程序的一次执行过程，或是正在运行的一个程序，是一个动态的过程，竞争计算机系统资源的基本单位

3、线程：线程是比进程更小的执行单位，一个进程在其执行过程中，可以产生多个线程，与进程不同的是同类的多个线程共享同一块内存空间和一组系统资源，所以系统在产生一个线程，或是在各个线程之间作切换工作时，负担要比进程小得多，

一个程序至少一个进程，一个进程至少一个线程。

4、并行：多个CPU同时执行多个任务，比如:多个人同时做不同的事

5、并发：一个CPU（采用时间片）同时执行多个任务，比如秒杀平台，多个人做同件事

6、多线程：

# 二、进程线程的区别
1、地址空间：同一进程的线程共享本进程的地址空间，而进程之间则是独立的地址空间。

2、资源拥有：同一进程内的线程共享本进程的资源，但是进程之间的资源是独立的。

3、一个进程崩溃后，在保护模式下不会对其他进程产生影响，但是一个线程崩溃整个进程都死掉。所以多进程要比多线程健壮。

4、进程切换时，消耗的资源大，效率高。所以涉及到频繁的切换时，使用线程要好于进程。同样如果要求同时进行并且又要共享某些变量的并发操作，只能用线程不能用进程。

5、执行过程：每个独立的进程程有一个程序运行的入口、顺序执行序列和程序入口。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。

6、线程是处理器调度的基本单位，但是进程不是。

7、两者均可并发执行。

# 三、线程安全的实现
## 1、互斥同步
synchronized 和 ReentrantLock。

## 2、 非阻塞同步
- CAS
- 原子变量AtomicXXXX

## 3、无同步方案 
栈封闭，Thread Local，可重入代码